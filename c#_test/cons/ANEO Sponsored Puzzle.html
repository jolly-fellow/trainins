<!DOCTYPE html>
<!-- saved from url=(0060)https://www.xarg.org/puzzle/codingame/aneo-sponsored-puzzle/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Codingame Solution: ANEO Sponsored Puzzle • Open Source is Everything</title><!-- 1561560801 --><link rel="icon" type="image/png" href="https://www.xarg.org/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="https://www.xarg.org/favicon-16x16.png" sizes="16x16"><style>*,::before,::after{box-sizing:border-box}body{font-family:'Libre Baskerville',serif;margin:0;padding:0}a{color:#c00;font-weight:700;text-decoration:none}ol a,ul a{font-weight:400}img{border:0 none}a:hover{text-decoration:underline}.icons{text-align:right;padding-right:10px}.icons svg{outline:5px solid #bbb;background:#bbb;margin:6px;border:0}nav{border-bottom:1px solid #bbb;font-size:13px;margin-bottom:20px;padding-bottom:5px}nav ul{list-style:none;margin:0;padding:0}nav li{margin:0;padding:0;display:inline;margin-right:20px;padding-bottom:5px}nav li a{color:#bbb;text-decoration:none;text-transform:uppercase}.conti{text-align:center;border-bottom:1px solid #bbb}.conti a{color:#666;text-transform:uppercase;font-size:12px;display:block;padding:5px}nav li.active{border-bottom:1px solid #333}nav li.active a{color:#333}main{display:block;margin-left:0;flex:1;padding:20px}main h1{font-weight:400;font-size:37px;margin:0}main h1 a,main h2 a,main h3 a{color:#333}article{margin-top:60px;max-width:820px}article time{color:#bbb;display:block;margin-top:3px;margin-bottom:8px;font-size:15px;padding-bottom:10px;line-height:1.2;font-family:Arial}article time a{color:#666}article p,article li{color:#333;line-height:1.75;font-size:19px}aside{padding-top:20px;text-align:center;background:#000;color:#fff}#sidebar{padding-bottom:15px}#sidebar p{font-weight:700;margin:0;font-size:13px;margin-bottom:12px;text-shadow:0 1px 3px rgba(0,0,0,0.3)}#sidebar a{font-size:37px;color:#fff;text-decoration:none}textarea{resize:vertical;width:100%}input{width:60%;padding:4px}#comments img{border:0 none;padding:0}#comments h3,form h3{font-size:23px;margin-top:40px}#comments .comments{margin-top:30px}#comments time{display:inline;padding:0;margin:0}main h2{font-size:28px;margin-top:20px;margin-bottom:10px}main h3{font-size:26px;margin-top:20px;margin-bottom:10px}main h4{font-size:24px;margin-top:20px;margin-bottom:10px}main img{padding:10px;border:1px solid #ccc}main ul{list-style-type:square}main pre{color:#fff;background:#211;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px;padding:10px 20px;font-size:13px}main .button{text-align:center;margin:30px}main .button a{color:#fff;padding:10px 30px;text-decoration:none;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px #666;-moz-box-shadow:0 1px 3px #666;text-shadow:0 1px 3px #666;border:solid #c00 2px;background:#c00;background:-webkit-gradient(linear,0 0,0 100%,from(#f00),to(#811));background:-moz-linear-gradient(top,#f00,#811);font-size:13px}@media (min-width: 50em){aside{top:0;left:0;position:fixed;width:17em;height:100%}main{margin-left:17em}#sidebar{position:absolute;bottom:30px}}@media (min-width: 68em){main h1{font-size:47px}main{padding:20px 100px}}.unicode{font-family:'Code2000','Sun-ExtA','Arial Unicode MS','NSimSun',sans-serif}pre .str,code .str{color:#65B042}pre .kwd,code .kwd{color:#E28964}pre .com,code .com{color:#AEAEAE;font-style:italic}pre .typ,code .typ{color:#89bdff}pre .lit,code .lit{color:#3387CC}pre .pun,code .pun{color:#fff}pre .pln,code .pln{color:#fff}pre .tag,code .tag{color:#89bdff}pre .atn,code .atn{color:#bdb76b}pre .atv,code .atv{color:#65B042}pre .dec,code .dec{color:#3387CC}pre.prettyprint,code.prettyprint{background-color:#000;-moz-border-radius:8px;-webkit-border-radius:8px;-o-border-radius:8px;-ms-border-radius:8px;-khtml-border-radius:8px;border-radius:8px}pre.prettyprint{width:100%;padding:1em;white-space:pre-wrap}</style><link rel="pingback" href="https://www.xarg.org/pingback/"><meta name="robots" content="index,follow"><meta name="ICBM" content="50.93793,14.84811"><meta property="fb:admins" content="1522308563"><meta name="author" content="Robert Eisele"><meta name="msapplication-config" content="none"><meta name="description" content=""><meta name="keywords" content="codingame, javascript, competitive coding, optimal, solution"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternate" type="application/rss+xml" title="Open Source is Everything" href="http://feeds.feedburner.com/exarg"><link rel="canonical" href="https://www.xarg.org/puzzle/codingame/aneo-sponsored-puzzle/"><link href="./ANEO Sponsored Puzzle_files/css" rel="stylesheet"><script type="text/javascript" async="" src="./ANEO Sponsored Puzzle_files/analytics.js.download"></script><script async="" src="./ANEO Sponsored Puzzle_files/js"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag("js",new Date());gtag("config","UA-1101037-2");</script></head><body><aside><div class="icons"><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=5CYTHKNGDJ5XC&amp;source=url" rel="nofollow me"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="25" height="25"><path fill="#636363" d="M19 9c0 0 0 0-1 0-1 4-3 5-6 5h-2c0 0-1 0 0 0l-1 6 0 1a0 0 0 0 0 0 1h3c0 0 1 0 1-1l0 0 0-3 0-1c0 0 0-1 1 0h0c3 0 5-1 6-5 0-1 0-2-1-3a3 3 0 0 0-1-1z"></path><path fill="#202020" d="M11 9a1 1 0 0 1 0-1h5c1 0 1 0 1 0a6 6 0 0 1 1 0c0 0 0 0 1 1 0-1 0-2-1-4-1-1-2-1-4-1h-6c0 0-1 0-1 1l-2 14a1 1 0 0 0 1 1h3l1-6 1-6z m7-1a6 6 0 0 0-1 0 9 9 0 0 0-1 0h-5a1 1 0 0 0 0 1l-1 5 0 0a1 1 0 0 1 1 0h1c3 0 6-1 7-5 0 0 0 0 0-1a4 4 0 0 0 0 0 5 5 0 0 0 0 0z"></path></svg></a><a href="https://github.com/infusion" rel="nofollow me"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="25" height="25"><path d="M12.5 0.6c-6.9 0-12.5 5.6-12.5 12.5 0 5.5 3.6 10.2 8.5 11.9 0.6 0.1 0.9-0.3 0.9-0.6 0-0.3 0-1.1 0-2.2-3.5 0.8-4.2-1.7-4.2-1.6-0.6-1.4-1.4-1.8-1.4-1.9-1.1-0.8 0.1-0.8 0.1-0.7 1.3 0.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.4 3.6 1 0.1-0.8 0.4-1.4 0.8-1.7-2.8-0.3-5.7-1.4-5.7-6.1 0-1.4 0.5-2.5 1.3-3.4-0.1-0.3-0.6-1.6 0.1-3.3 0 0 1-0.3 3.5 1.3 1-0.3 2.1-0.4 3.1-0.4 1.1 0 2.1 0.1 3.1 0.4 2.4-1.6 3.4-1.3 3.5-1.3 0.7 1.7 0.3 3 0.1 3.3 0.8 0.9 1.3 2 1.3 3.4 0 4.8-2.9 5.9-5.7 6.1 0.4 0.4 0.8 1.1 0.8 2.3 0 1.7 0 3 0 3.5 0 0.3 0.2 0.7 0.9 0.6 5-1.7 8.5-6.3 8.5-11.9 0-6.9-5.6-12.5-12.5-12.5" fill="#000" stroke="none"></path></svg></a><a href="https://www.facebook.com/xarg.org" rel="nofollow me"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="25" height="25"><path d="M17.2 25l0-9.7 3.2 0 0.5-3.8-3.7 0 0-2.4c0-1.1 0.3-1.8 1.8-1.8l2 0 0-3.4c-0.3 0-1.5-0.1-2.9-0.1-2.9 0-4.9 1.8-4.8 5l0 2.7-3.3 0 0 3.8 3.3 0 0 9.7 3.9 0z" fill="#000"></path></svg></a><a href="https://twitter.com/roberteisele" rel="nofollow me"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" height="25" width="25"><path d="M7.9 22.7c9.4 0 14.6-7.8 14.6-14.6 0-0.2 0-0.4-0.1-0.7 1-0.7 1.9-1.6 2.6-2.7-0.9 0.4-1.9 0.7-2.9 0.9 1.1-0.6 1.9-1.6 2.2-2.9-1 0.6-2.1 1-3.2 1.3-0.9-1-2.3-1.6-3.8-1.7-2.8 0-5.1 2.3-5.1 5.2 0 0.4 0 0.8 0.1 1.1-4.3-0.2-8-2.3-10.6-5.3-0.4 0.8-0.7 1.6-0.7 2.6 0 1.8 0.9 3.4 2.3 4.2-0.8 0-1.6-0.3-2.3-0.6 0 0 0 0 0 0.1 0 2.5 1.8 4.6 4.1 5-0.4 0.1-0.9 0.2-1.3 0.2-0.3 0-0.7 0-1-0.1 0.7 2 2.5 3.5 4.8 3.5-1.8 1.4-4 2.2-6.4 2.2-0.4 0-0.8 0-1.2 0 2.3 1.5 5 2.3 7.9 2.3" fill="#000" stroke="none"></path></svg></a></div><div id="sidebar"><p><a href="https://www.xarg.org/" rel="top">Robert Eisele</a></p><p>Computer Science &amp; Machine Learning</p></div></aside><main><nav><ul><li><a href="https://www.xarg.org/">Home</a></li><li><a href="https://www.xarg.org/about/" rel="author">About</a></li><li><a href="https://www.xarg.org/archive/" rel="archive">Archive</a></li><li class="active"><a href="https://www.xarg.org/projects/" rel="contents">Projects</a></li></ul></nav><link rel="stylesheet" href="./ANEO Sponsored Puzzle_files/katex.min.css"><script defer="" src="./ANEO Sponsored Puzzle_files/katex.min.js.download"></script><script defer="" src="./ANEO Sponsored Puzzle_files/auto-render.min.js.download" onload="renderMathInElement(document.body);"></script><script defer="" src="./ANEO Sponsored Puzzle_files/plot.min.js.download" onload="renderPlot()"></script><article><h1><a href="https://www.xarg.org/puzzle/codingame/aneo-sponsored-puzzle/" rel="bookmark">Codingame Solution: ANEO Sponsored Puzzle</a></h1><p><a rel="nofollow" href="https://www.codingame.com/ide/puzzle/aneo">Original Problem</a></p><div>You enter a section of road and you plan to rest entirely on your cruise control to cross the area without having to stop or slow down.<br><br>The goal is to find the maximum speed (off speeding) that will allow you to cross all the traffic lights to green.<br><br><strong>Warning:&nbsp;</strong>You can not cross a traffic light the second it turns red !<br><br>Your vehicle enters the zone directly at the speed programmed on the cruise control which ensures that it does not change anymore.</div><div><div><div>Input</div><div><strong>Line 1:&nbsp;</strong>An integer&nbsp;<var>speed</var>&nbsp;for the maximum speed allowed on the portion of the road (in km / h).<br><br><strong>Line 2:&nbsp;</strong>An integer&nbsp;<var>lightCount</var>&nbsp;for the number of traffic lights on the road.<br><br><strong><var>lightCount</var>&nbsp;next lines:&nbsp;</strong><br>- An integer&nbsp;<var>distance</var>&nbsp;representing the distance of the traffic light from the starting point (in meters).<br>- An integer&nbsp;<var>duration</var>&nbsp;representing the duration of the traffic light on each color.<br><br>A traffic light alternates a period of&nbsp;<var>duration</var>&nbsp;seconds in green and then&nbsp;<var>duration</var>&nbsp;seconds in red.<br>All traffic lights turn green at the same time as you enter the area.</div></div><div><div>Output</div><div><strong>Line 1:&nbsp;</strong>The integer speed (km / h) as high as possible that cross all the green lights without committing speeding.</div></div><div><div>Constraints</div><div>1 ≤&nbsp;<var>speed</var>&nbsp;≤ 200<br>1 ≤&nbsp;<var>lightCount</var>&nbsp;≤ 9999<br>1 ≤&nbsp;<var>distance</var>&nbsp;≤ 99999<br>1 ≤&nbsp;<var>duration</var>&nbsp;≤ 9999</div></div></div><h2>Solution</h2><p>When we visualize the problem in a space-time diagram, we see that moving with constant speed increases the position linearly. We now need to find the steepest curve that passes a green phase on each traffic light.</p><p id="image"><svg width="280" height="280"><line x1="60" y1="220" x2="60" y2="60" style="stroke: black; fill: none; stroke-width: 1;"></line><path d="M 60 60 L 63.09016994374947 69.51056516295154 L 56.90983005625053 69.51056516295154"></path><line x1="60" y1="220" x2="220" y2="220" style="stroke: black; fill: none; stroke-width: 1;"></line><path d="M 220 220 L 210.48943483704846 223.0901699437495 L 210.48943483704846 216.9098300562505"></path><line x1="100" y1="220" x2="100" y2="212" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="212" x2="100" y2="204" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="204" x2="100" y2="196" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="196" x2="100" y2="188" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="188" x2="100" y2="180" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="180" x2="100" y2="172" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="172" x2="100" y2="164" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="164" x2="100" y2="156" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="156" x2="100" y2="148" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="148" x2="100" y2="140" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="140" x2="100" y2="132" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="132" x2="100" y2="124" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="124" x2="100" y2="116.00000000000001" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="116" x2="100" y2="108" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="108" x2="100" y2="100.00000000000001" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="100" x2="100" y2="92.00000000000001" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="92.00000000000001" x2="100" y2="84.00000000000003" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="84" x2="100" y2="76" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="76" x2="100" y2="68.00000000000003" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="100" y1="68" x2="100" y2="60.00000000000003" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="220" x2="148" y2="200" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="200" x2="148" y2="180" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="180" x2="148" y2="160" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="160" x2="148" y2="140" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="140" x2="148" y2="120" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="120" x2="148" y2="100" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="100" x2="148" y2="80" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="148" y1="80" x2="148" y2="60" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="220" x2="180" y2="208" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="208" x2="180" y2="196" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="196" x2="180" y2="184" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="184" x2="180" y2="172" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="172" x2="180" y2="160" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="160" x2="180" y2="148" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="148" x2="180" y2="136" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="136" x2="180" y2="124" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="124" x2="180" y2="112" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="112.00000000000001" x2="180" y2="100" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="100" x2="180" y2="88" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="88" x2="180" y2="76" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="76" x2="180" y2="64" style="stroke: rgb(34, 221, 34); fill: none; stroke-width: 3;"></line><line x1="180" y1="64" x2="180" y2="60" style="stroke: rgb(221, 34, 34); fill: none; stroke-width: 3;"></line><line x1="60" y1="220" x2="220" y2="144" style="stroke: black; fill: none; stroke-width: 1;"></line><foreignobject width="300" height="300" x="220" y="220"><div style="text-align: left;"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">s</span></span></span></span></div></foreignobject><foreignobject width="300" height="300" x="44" y="60"><div style="text-align: left;"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.61508em; vertical-align: 0em;"></span><span class="mord mathdefault">t</span></span></span></span></div></foreignobject></svg></p><p>Since the light switches periodically we could use a sine wave and interpret the phase with negative output as red and positive as green. However, this introduces a lot of rounding errors. Another way is to solve the problem with integers only. Using a congruence relation modulo <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">m</span></span></span></span></span>, where every <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">m</span></span></span></span></span>th element will land in the same class. But we want only two classes with a fixed period. Thats why we double the phase to a red-green cycle which gives <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>=</mo><mn>2</mn><mi>d</mi></mrow><annotation encoding="application/x-tex">m=2d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord">2</span><span class="mord mathdefault">d</span></span></span></span></span> for the given duration <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault">d</span></span></span></span></span>. Now the half of these classes are red and the other half is green.</p><p>The second observation is that the time <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">t_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> needed for the <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span></span></span></span></span>th section is <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mi>k</mi></msub><mo>=</mo><mfrac><msub><mi>s</mi><mi>k</mi></msub><mi>v</mi></mfrac></mrow><annotation encoding="application/x-tex">t_k=\frac{s_k}{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.06225em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.717252em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03588em;">v</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.41586em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.34877em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.151229em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> with the length of path <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">s_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> and speed <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span></span></span></span></span>. Since the speed is given in km/h, we convert it to m/s first. Combining both ideas leads to:</p><p><span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>k</mi></msub><mo>≡</mo><mfrac><msub><mi>s</mi><mi>k</mi></msub><mrow><mfrac><mn>1000</mn><mn>3600</mn></mfrac><mi>v</mi></mrow></mfrac><mo>≡</mo><mfrac><mrow><mn>18</mn><msub><mi>s</mi><mi>k</mi></msub></mrow><mrow><mn>5</mn><mi>v</mi></mrow></mfrac><mspace></mspace><mspace width="1em"></mspace><mo>(</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mspace width="0.3333333333333333em"></mspace><mn>2</mn><msub><mi>d</mi><mi>k</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">p_k\equiv\frac{s_k}{\frac{1000}{3600}v}\equiv \frac{18s_k}{5v}\pmod{2d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.65819em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.18767em; vertical-align: -1.08011em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10756em;"><span class="" style="top: -2.26489em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">6</span><span class="mord mtight">0</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span><span class="mord mtight">0</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.08011em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.00744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">5</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">8</span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right: 1em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right: 0.333333em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span> </p><p>Now we select half of the time by stating <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>k</mi></msub><mo>&lt;</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">p_k&lt;d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.73354em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>, which represents the green phase. Solving the modular congruence under <a href="https://www.xarg.org/book/analysis/rational-numbers/">rational numbers</a> gives</p><p><span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>18</mn><mo>⋅</mo><msub><mi>s</mi><mi>k</mi></msub><mo>)</mo> <mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow> <mo>(</mo><mn>2</mn><mo>⋅</mo><mn>5</mn><mo>⋅</mo><mi>v</mi><mo>⋅</mo><msub><mi>d</mi><mi>k</mi></msub><mo>)</mo><mo>&lt;</mo><mo>(</mo><mn>5</mn><mo>⋅</mo><mi>v</mi><mo>⋅</mo><msub><mi>d</mi><mi>k</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">(18 \cdot s_k) \bmod (2\cdot 5 \cdot v \cdot d_k) &lt; (5 \cdot v \cdot d_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">8</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mspace" style="margin-right: 0.0555556em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mspace" style="margin-right: 0.0555556em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">5</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.44445em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.44445em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></p><p>The easiest way to solve the problem now is using this inequality and maximize <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span></span></span></span></span>. To do so, we start with the given maximum speed, check if we can take this speed for every traffic light and as soon as we fail with one, we start from the beginning a little slower. </p><div><pre class="prettyprint"><span class="pln">let speed </span><span class="pun">=</span><span class="pln"> </span><span class="pun">+</span><span class="pln">readline</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> lightCount </span><span class="pun">=</span><span class="pln"> </span><span class="pun">+</span><span class="pln">readline</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> lights </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">let i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> lightCount</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln">
    lights</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">readline</span><span class="pun">().</span><span class="pln">split</span><span class="pun">(</span><span class="str">' '</span><span class="pun">).</span><span class="pln">map</span><span class="pun">(</span><span class="typ">Number</span><span class="pun">));</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> isRed </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">speed</span><span class="pun">,</span><span class="pln"> dist</span><span class="pun">,</span><span class="pln"> dur</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln">
    </span><span class="pun">(</span><span class="lit">18</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> dist</span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="lit">10</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> speed </span><span class="pun">*</span><span class="pln"> dur</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">5</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> speed </span><span class="pun">*</span><span class="pln"> dur</span><span class="pun">);</span><span class="pln">

</span><span class="kwd">for</span><span class="pun">(</span><span class="pln">let i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> lightCount</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">isRed</span><span class="pun">(</span><span class="pln">speed</span><span class="pun">,</span><span class="pln"> lights</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="lit">0</span><span class="pun">],</span><span class="pln"> lights</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="lit">1</span><span class="pun">]))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        speed</span><span class="pun">--;</span><span class="pln"> </span><span class="com">// Reduce speed</span><span class="pln">
        i </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> </span><span class="com">// Start again</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">speed</span><span class="pun">);</span></pre></div><p>This works since we scan over every possible speed and check for a functioning path through the traffic lights. As soon as the loop finishes once, the loop ends. However, the overall running time is <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mi>v</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(nv)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mclose">)</span></span></span></span></span>. By solving it with Chinese remainder theorem, a little improvement could be achieved but the problem that needs to be solved is eliminating the inequality. Another idea to improve the performance is not decrementing speed only once for each red light, but for the whole time until this light gets green again. Since <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">p_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> is the position in the red-green time window, it can be used as an offset to the next green phase.</p><script>
function dashed(g, x, y, w) {
 var ys = w;
 var ye = 2 * w;
 do {
 g.line({x1: x, x2: x, y1: ys - w, y2: Math.min(y, ye - w), stroke: "#2d2", lineWidth: 3});
 g.line({x1: x, x2: x, y1: ys, y2: Math.min(y, ye), stroke: "#d22", lineWidth: 3});
 ys = ye + w;
 ye+= 2 * w;
 } while (ys < y);
}
function renderPlot() {
var g = new Plot('#image', [-1, 5], [-1, 5]).init(280);
g.arrow({x1: 0, y1: 0, x2: 0, y2: 4});
g.arrow({x1: 0, y1: 0, x2: 4, y2: 0});
dashed(g, 1, 4, 0.2);
dashed(g, 2.2, 4, 0.5);
dashed(g, 3, 4, 0.3);
g.line({x1: 0, y1: 0, x2: 4, y2: 1.9});
g.text({x: 4, y: 0, text: "$s$"});
g.text({x: -0.4, y: 4, text: "$t$"});
}
</script><p><a stlye="font-size:18px" href="https://www.xarg.org/puzzles/">« Back to problem overview</a></p></article><script defer="" src="./ANEO Sponsored Puzzle_files/prettify.js.download"></script><script>
 window.addEventListener('DOMContentLoaded', function() {prettyPrint();});
 </script><footer style="border-top: 1px solid #F2F2F0; font-size:14px;padding: 10px 0 25px; width:100%">© 2008 ‐ 2019 Robert Eisele All rights reserved. <a href="https://www.xarg.org/privacy-policy/" style="color:black">Privacy Policy</a>, <a href="https://www.xarg.org/contact/" style="color:black">Contact</a></footer></main></body></html>